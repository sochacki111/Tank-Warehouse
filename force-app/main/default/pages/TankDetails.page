<apex:page standardController="Tank__c" extensions="TankControllerExtension">
    <apex:form>
        <apex:pageMessages id="messages" />
        <apex:pageBlock title="Tank Details">
            <apex:pageBlockSection columns="1">
                <apex:outputField value="{!Tank__c.Name}">
                    <apex:inlineEditSupport event="ondblClick" showOnEdit="saveButton" />
                </apex:outputField>
                <apex:outputField value="{!Tank__c.Country__c}">
                    <apex:inlineEditSupport event="ondblClick" showOnEdit="saveButton" />
                </apex:outputField>
                <apex:outputField value="{!Tank__c.NumberOfTurrets__c}" />

                <apex:pageBlockSection title="Turrets" columns="1">
                    <apex:pageBlockTable value="{!Tank__c.Turrets__r}" var="turret">
                        <apex:column headerValue="Turret Name">
                            <apex:outputLink value="/apex/TurretDetails?id={!turret.id}">{!turret.Name}</apex:outputLink>
                        </apex:column>
                    </apex:pageBlockTable>
                </apex:pageBlockSection>

                <apex:pageBlockSection title="Tank History" columns="1">
                    <apex:pageBlockTable value="{!Tank__c.TankHistory__r}" var="history" rendered="true">
                        <apex:column value="{!history.action__c}" />
                        <apex:column value="{!history.date__c}" />
                        <apex:column value="{!history.createdBy.name}" headerValue="User" />
                    </apex:pageBlockTable>
                </apex:pageBlockSection>

            </apex:pageBlockSection>

            <apex:pageBlockButtons location="bottom">
                <apex:commandButton value="Save" action="{!updateTank}" id="saveButton" style="display:none" />
                <apex:commandButton value="Delete" action="{!deleteTank}" />
            </apex:pageBlockButtons>
        </apex:pageBlock>
    </apex:form>
    <apex:outputLink value="/apex/Tanks">Go to Tank List</apex:outputLink>
</apex:page>